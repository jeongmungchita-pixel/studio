# ì¬ë¬´ê´€ë¦¬ ì‹œìŠ¤í…œ ì—…ë°ì´íŠ¸

> ì—…ë°ì´íŠ¸ì¼: 2025-10-15

---

## âœ… ì¶”ê°€ëœ ê¸°ëŠ¥

### 1. íšŒì› ë¶„ë¥˜ë³„ ê²°ì œ ê´€ë¦¬
- **íƒ­ í•„í„°**: ì „ì²´/ì„±ì¸/ì£¼ë‹ˆì–´ë¡œ êµ¬ë¶„
- **ë¶„ë¥˜ë³„ í†µê³„**: ê° ë¶„ë¥˜ì˜ ì…ê¸ˆ ëŒ€ê¸°/ì™„ë£Œ/ì´ì•¡ í‘œì‹œ
- **íšŒì› ë°°ì§€**: ëª¨ë“  ê²°ì œ ë‚´ì—­ì— íšŒì› ë¶„ë¥˜ ë°°ì§€ í‘œì‹œ

### 2. ìˆ˜ì…/ì§€ì¶œ ì§ì ‘ ê´€ë¦¬
- **ìˆ˜ì… ì¶”ê°€**: íšŒì›ê¶Œ, ì´ë²¤íŠ¸, ì‹œí•©, í›„ì›ê¸ˆ, ê¸°íƒ€
- **ì§€ì¶œ ì¶”ê°€**: ì‹œì„¤ ì„ëŒ€ë£Œ, ì¥ë¹„, ê¸‰ì—¬, ê³µê³¼ê¸ˆ, ë§ˆì¼€íŒ…, ìœ ì§€ë³´ìˆ˜, ê¸°íƒ€
- **ìƒì„¸ ì…ë ¥**: ì¹´í…Œê³ ë¦¬, ê¸ˆì•¡, ì„¤ëª…, ë‚ ì§œ

### 3. ìˆ˜ì… ë¶„í•  ê¸°ëŠ¥
- **ë¶„í•  ì²˜ë¦¬**: 2~12ê°œì›”ë¡œ ìˆ˜ì… ë¶„í• 
- **ìë™ ê³„ì‚°**: ì›”ë³„ ê¸ˆì•¡ ìë™ ê³„ì‚° (ë‚˜ë¨¸ì§€ëŠ” ì²« ë‹¬ì— í¬í•¨)
- **ë¶„í•  í‘œì‹œ**: "ë¶„í•  1/5" ë°°ì§€ë¡œ ëª…í™•íˆ í‘œì‹œ

### 4. ë¶„í•  ë˜ëŒë¦¬ê¸°
- **ì›ë³¸ ë³µì›**: ë¶„í•  ì·¨ì†Œ ì‹œ ì›ë³¸ ê±°ë˜ ë³µì›
- **ì¼ê´„ ì²˜ë¦¬**: ëª¨ë“  ë¶„í•  ê±°ë˜ í•œ ë²ˆì— ì·¨ì†Œ

---

## ğŸ“Š ë°ì´í„° êµ¬ì¡°

### FinancialTransaction (ì‹ ê·œ)
```typescript
export interface FinancialTransaction {
  id: string;
  clubId: string;
  type: 'income' | 'expense';
  category: TransactionCategory;
  amount: number;
  description: string;
  date: string;
  
  // ë¶„í•  ê´€ë ¨
  isSplit?: boolean;
  splitMonths?: number;
  splitParentId?: string;
  splitIndex?: number;
  
  // ë©”íƒ€ë°ì´í„°
  createdBy: string;
  createdAt: string;
  updatedAt?: string;
  
  // ì·¨ì†Œ/ë˜ëŒë¦¬ê¸°
  isCancelled?: boolean;
  cancelledAt?: string;
  cancelledBy?: string;
}
```

### TransactionCategory (ì‹ ê·œ)
```typescript
export type TransactionCategory = 
  // ìˆ˜ì…
  | 'membership_fee'
  | 'event_fee'
  | 'competition_fee'
  | 'sponsorship'
  | 'other_income'
  // ì§€ì¶œ
  | 'facility_rent'
  | 'equipment'
  | 'salary'
  | 'utility'
  | 'marketing'
  | 'maintenance'
  | 'other_expense';
```

---

## ğŸ¨ UI/UX ê°œì„ 

### ìƒ‰ìƒ ì²´ê³„
- **ì „ì²´**: ê¸°ë³¸ ìƒ‰ìƒ
- **ì„±ì¸**: íŒŒë€ìƒ‰ (text-blue-600)
- **ì£¼ë‹ˆì–´**: ì´ˆë¡ìƒ‰ (text-green-600)
- **ìˆ˜ì…**: ì´ˆë¡ìƒ‰ (text-green-600)
- **ì§€ì¶œ**: ë¹¨ê°„ìƒ‰ (text-red-600)

### ì•„ì´ì½˜
- **ì„±ì¸**: User
- **ì£¼ë‹ˆì–´**: Baby
- **ì „ì²´**: Users
- **ìˆ˜ì…**: TrendingUp
- **ì§€ì¶œ**: TrendingDown
- **ë¶„í• **: Split
- **ë˜ëŒë¦¬ê¸°**: Undo2

---

## ğŸ’¡ ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤

### ì‹œë‚˜ë¦¬ì˜¤ 1: í›„ì›ê¸ˆ ìˆ˜ì… ë“±ë¡ ë° ë¶„í• 
1. "ìˆ˜ì… ì¶”ê°€" ë²„íŠ¼ í´ë¦­
2. ì¹´í…Œê³ ë¦¬: í›„ì›ê¸ˆ
3. ê¸ˆì•¡: 1,000,000ì›
4. ì„¤ëª…: "2025ë…„ ìƒë°˜ê¸° í›„ì›ê¸ˆ"
5. ë‚ ì§œ: 2025-10-15
6. ë“±ë¡ í›„ "ë¶„í• " ë²„íŠ¼ í´ë¦­
7. 5ê°œì›” ì„ íƒ
8. ê²°ê³¼: 10ì›” 200,000ì›, 11ì›”~2ì›” ê° 200,000ì›

### ì‹œë‚˜ë¦¬ì˜¤ 2: ì‹œì„¤ ì„ëŒ€ë£Œ ì§€ì¶œ ë“±ë¡
1. "ì§€ì¶œ ì¶”ê°€" ë²„íŠ¼ í´ë¦­
2. ì¹´í…Œê³ ë¦¬: ì‹œì„¤ ì„ëŒ€ë£Œ
3. ê¸ˆì•¡: 2,000,000ì›
4. ì„¤ëª…: "10ì›” ì²´ìœ¡ê´€ ì„ëŒ€ë£Œ"
5. ë‚ ì§œ: 2025-10-01
6. ë“±ë¡ ì™„ë£Œ

### ì‹œë‚˜ë¦¬ì˜¤ 3: ë¶„í•  ë˜ëŒë¦¬ê¸°
1. ë¶„í• ëœ ê±°ë˜ ì¤‘ í•˜ë‚˜ ì„ íƒ
2. "ë˜ëŒë¦¬ê¸°" ë²„íŠ¼ í´ë¦­
3. í™•ì¸
4. ê²°ê³¼: ëª¨ë“  ë¶„í•  ê±°ë˜ ì·¨ì†Œ + ì›ë³¸ 1,000,000ì› ë³µì›

---

## ğŸ”§ ê¸°ìˆ  ì„¸ë¶€ì‚¬í•­

### Firestore ì»¬ë ‰ì…˜
- **financial_transactions**: ìˆ˜ì…/ì§€ì¶œ ê±°ë˜ ì €ì¥
- ì¸ë±ìŠ¤ í•„ìš”:
  - `clubId` + `isCancelled` + `date` (desc)
  - `splitParentId` + `isCancelled`

### ì¿¼ë¦¬ ìµœì í™”
- `isCancelled: false` í•„í„°ë¡œ ì·¨ì†Œëœ ê±°ë˜ ì œì™¸
- `orderBy('date', 'desc')`ë¡œ ìµœì‹ ìˆœ ì •ë ¬

### ë¶„í•  ë¡œì§
```typescript
const monthlyAmount = Math.floor(totalAmount / months);
const remainder = totalAmount - (monthlyAmount * months);

// ì²« ë‹¬ì— ë‚˜ë¨¸ì§€ í¬í•¨
const firstMonthAmount = monthlyAmount + remainder;
```

---

## ğŸ“ Firestore Rules ì¶”ê°€ í•„ìš”

```javascript
// financial_transactions ì»¬ë ‰ì…˜
match /financial_transactions/{transactionId} {
  allow read: if isClubMember(request.auth.uid, resource.data.clubId);
  allow create: if isClubAdmin(request.auth.uid, request.resource.data.clubId);
  allow update, delete: if isClubAdmin(request.auth.uid, resource.data.clubId);
}
```

---

## âœ¨ ì£¼ìš” ê°œì„ ì‚¬í•­

### Phase 1-4 ì™„ë£Œ
1. âœ… **Phase 1**: ë°ì´í„° êµ¬ì¡° (íšŒì› ë¶„ë¥˜ ì‹œìŠ¤í…œ)
2. âœ… **Phase 2**: UI ê°œì„  (í•„í„°ë§, ë°°ì§€)
3. âœ… **Phase 3**: ê³ ê¸‰ ê¸°ëŠ¥ (ìˆ˜ì—… ìê²© ê²€ì¦, í†µê³„)
4. âœ… **Phase 4**: ìµœì í™” (ë§ˆì´ê·¸ë ˆì´ì…˜, í•„í„°)

### ì¬ë¬´ê´€ë¦¬ ì—…ë°ì´íŠ¸
5. âœ… **íšŒì› ë¶„ë¥˜ë³„ ê²°ì œ ê´€ë¦¬**
6. âœ… **ìˆ˜ì…/ì§€ì¶œ ì§ì ‘ ê´€ë¦¬**
7. âœ… **ìˆ˜ì… ë¶„í•  ê¸°ëŠ¥**
8. âœ… **ë¶„í•  ë˜ëŒë¦¬ê¸°**

---

## ğŸš€ ë°°í¬ ì „ ì²´í¬ë¦¬ìŠ¤íŠ¸

### í•„ìˆ˜ ì‘ì—…
- [ ] Firestore ì¸ë±ìŠ¤ ìƒì„±
- [ ] Firestore Rules ì—…ë°ì´íŠ¸
- [ ] íƒ€ì… ì •ì˜ í™•ì¸ (`FinancialTransaction`)
- [ ] ê¸°ì¡´ íšŒì› ë°ì´í„° ë§ˆì´ê·¸ë ˆì´ì…˜ (ì„ íƒ)

### í…ŒìŠ¤íŠ¸ í•­ëª©
- [ ] ìˆ˜ì… ì¶”ê°€ í…ŒìŠ¤íŠ¸
- [ ] ì§€ì¶œ ì¶”ê°€ í…ŒìŠ¤íŠ¸
- [ ] ë¶„í•  ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸ (2~12ê°œì›”)
- [ ] ë˜ëŒë¦¬ê¸° í…ŒìŠ¤íŠ¸
- [ ] íšŒì› ë¶„ë¥˜ë³„ í•„í„°ë§ í…ŒìŠ¤íŠ¸
- [ ] í†µê³„ ì¹´ë“œ í™•ì¸

### ì„±ëŠ¥ í™•ì¸
- [ ] ê±°ë˜ ëª©ë¡ ë¡œë”© ì†ë„
- [ ] ë¶„í•  ì²˜ë¦¬ ì†ë„
- [ ] í•„í„°ë§ ë°˜ì‘ ì†ë„

---

## ğŸ“š ê´€ë ¨ ë¬¸ì„œ
- `PHASE1_COMPLETE.md`: ë°ì´í„° êµ¬ì¡°
- `PHASE2_COMPLETE.md`: UI ê°œì„ 
- `PHASE3_COMPLETE.md`: ê³ ê¸‰ ê¸°ëŠ¥
- `PHASE4_COMPLETE.md`: ìµœì í™”

---

**ì—…ë°ì´íŠ¸ ì™„ë£Œì¼**: 2025-10-15  
**ë°°í¬ ì¤€ë¹„**: ì™„ë£Œ  
**ë‹¤ìŒ ë‹¨ê³„**: Firestore ì„¤ì • â†’ ë°°í¬
