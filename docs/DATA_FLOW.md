# KGF ë„¥ì„œìŠ¤ - ì „ì²´ ë°ì´í„° íë¦„

> ìµœì¢… ì—…ë°ì´íŠ¸: 2025-10-12

---

## ğŸ—ï¸ ì•„í‚¤í…ì²˜ ê°œìš”

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Client (Next.js)                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚   Pages/     â”‚  â”‚  Components  â”‚  â”‚    Hooks     â”‚     â”‚
â”‚  â”‚   Routes     â”‚  â”‚     (UI)     â”‚  â”‚  (Logic)     â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚         â”‚                  â”‚                  â”‚              â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                            â”‚                                 â”‚
â”‚                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚                   â”‚ Firebase Context â”‚                       â”‚
â”‚                   â”‚   (Provider)     â”‚                       â”‚
â”‚                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   Firebase SDK   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                    â”‚                    â”‚
   â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”
   â”‚  Auth   â”‚        â”‚ Firestore â”‚       â”‚ Storage â”‚
   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
        â”‚                   â”‚                   â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   Firebase    â”‚
                    â”‚   Backend     â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ” 1. ì¸ì¦ íë¦„ (Authentication Flow)

### 1.1 ë¡œê·¸ì¸ í”„ë¡œì„¸ìŠ¤

```typescript
// 1. ì‚¬ìš©ìê°€ ë¡œê·¸ì¸ ì‹œë„
/app/login/page.tsx
  â†“
signInWithEmailAndPassword(auth, email, password)
  â†“
// 2. Firebase Auth ì¸ì¦
Firebase Auth
  â†“
// 3. onAuthStateChanged íŠ¸ë¦¬ê±°
/hooks/use-user.tsx â†’ useUser()
  â†“
// 4. Firestoreì—ì„œ ì‚¬ìš©ì í”„ë¡œí•„ ì¡°íšŒ
getDoc(firestore, 'users', uid)
  â†“
// 5. í´ëŸ½ ì˜¤ë„ˆ/ë§¤ë‹ˆì €ì¸ ê²½ìš° clubId ì¡°íšŒ
query(firestore, 'clubs', where('name', '==', clubName))
  â†“
// 6. í†µí•©ëœ User ê°ì²´ ìƒì„±
User & UserProfile & { clubId?: string }
  â†“
// 7. ì „ì—­ ìƒíƒœë¡œ ì œê³µ
useUser() â†’ { user, isUserLoading }
```

### 1.2 ì‚¬ìš©ì í”„ë¡œí•„ êµ¬ì¡°

```typescript
interface CombinedUser {
  // Firebase Auth (User)
  uid: string;
  email: string;
  displayName: string;
  photoURL: string;
  phoneNumber?: string;
  
  // Firestore UserProfile
  id: string;
  role: UserRole;
  provider: 'email' | 'google';
  status: 'pending' | 'approved' | 'rejected';
  clubName?: string;
  
  // ë™ì ìœ¼ë¡œ ì¶”ê°€
  clubId?: string; // í´ëŸ½ ì˜¤ë„ˆ/ë§¤ë‹ˆì €ì¸ ê²½ìš°
}
```

---

## ğŸ“Š 2. ë°ì´í„° ì¡°íšŒ íë¦„ (Data Fetching Flow)

### 2.1 ì‹¤ì‹œê°„ ë°ì´í„° êµ¬ë… íŒ¨í„´

```typescript
// 1. ì»´í¬ë„ŒíŠ¸ì—ì„œ ì¿¼ë¦¬ ìƒì„± (ë©”ëª¨ì´ì œì´ì…˜ í•„ìˆ˜!)
const membersQuery = useMemoFirebase(() => {
  if (!firestore || !user?.clubId) return null;
  return query(
    collection(firestore, 'members'),
    where('clubId', '==', user.clubId),
    where('status', '==', 'active'),
    orderBy('createdAt', 'desc')
  );
}, [firestore, user?.clubId]);

// 2. useCollection Hookìœ¼ë¡œ êµ¬ë…
const { data: members, isLoading, error } = useCollection<Member>(membersQuery);

// 3. ë‚´ë¶€ ë™ì‘
useCollection()
  â†“
onSnapshot(query, callback)  // Firestore ì‹¤ì‹œê°„ ë¦¬ìŠ¤ë„ˆ
  â†“
snapshot.docs.map(doc => ({ ...doc.data(), id: doc.id }))
  â†“
setData(results)  // ìƒíƒœ ì—…ë°ì´íŠ¸
  â†“
ì»´í¬ë„ŒíŠ¸ ë¦¬ë Œë”ë§
```

### 2.2 ë°ì´í„° íë¦„ ë‹¤ì´ì–´ê·¸ë¨

```
Component
    â”‚
    â”œâ”€ useMemoFirebase()  â† ì¿¼ë¦¬ ë©”ëª¨ì´ì œì´ì…˜
    â”‚       â”‚
    â”‚       â””â”€ query(collection, where, orderBy)
    â”‚
    â”œâ”€ useCollection<T>(query)
    â”‚       â”‚
    â”‚       â”œâ”€ onSnapshot() â† Firestore ì‹¤ì‹œê°„ ë¦¬ìŠ¤ë„ˆ
    â”‚       â”‚       â”‚
    â”‚       â”‚       â”œâ”€ ë°ì´í„° ë³€ê²½ ê°ì§€
    â”‚       â”‚       â””â”€ callback ì‹¤í–‰
    â”‚       â”‚
    â”‚       â”œâ”€ setData()  â† ìƒíƒœ ì—…ë°ì´íŠ¸
    â”‚       â””â”€ setIsLoading(false)
    â”‚
    â””â”€ Render with data
```

---

## âœï¸ 3. ë°ì´í„° ìƒì„±/ìˆ˜ì • íë¦„ (CRUD Operations)

### 3.1 ë°ì´í„° ìƒì„± (Create)

```typescript
// ì˜ˆì‹œ: íšŒì› ì¶”ê°€
async function addMember(memberData: Omit<Member, 'id'>) {
  // 1. Firestore ì°¸ì¡° ìƒì„±
  const memberRef = doc(collection(firestore, 'members'));
  
  // 2. ë°ì´í„° ì¤€ë¹„
  const newMember: Member = {
    id: memberRef.id,
    ...memberData,
    createdAt: new Date().toISOString(),
  };
  
  // 3. Firestoreì— ì €ì¥
  await setDoc(memberRef, newMember);
  
  // 4. ì‹¤ì‹œê°„ ë¦¬ìŠ¤ë„ˆê°€ ìë™ìœ¼ë¡œ ì—…ë°ì´íŠ¸ ê°ì§€
  // â†’ useCollectionì´ ìë™ìœ¼ë¡œ ìƒˆ ë°ì´í„° ë°˜ì˜
}
```

### 3.2 ë°ì´í„° ìˆ˜ì • (Update)

```typescript
// ì˜ˆì‹œ: íšŒì› ìƒíƒœ ë³€ê²½
async function updateMemberStatus(memberId: string, status: string) {
  // 1. ë¬¸ì„œ ì°¸ì¡°
  const memberRef = doc(firestore, 'members', memberId);
  
  // 2. ë¶€ë¶„ ì—…ë°ì´íŠ¸
  await updateDoc(memberRef, {
    status,
    updatedAt: new Date().toISOString(),
  });
  
  // 3. ì‹¤ì‹œê°„ ë¦¬ìŠ¤ë„ˆê°€ ìë™ ì—…ë°ì´íŠ¸
}
```

### 3.3 ë°ì´í„° ì‚­ì œ (Delete)

```typescript
// ì˜ˆì‹œ: íšŒì› ì‚­ì œ
async function deleteMember(memberId: string) {
  const memberRef = doc(firestore, 'members', memberId);
  await deleteDoc(memberRef);
  // ì‹¤ì‹œê°„ ë¦¬ìŠ¤ë„ˆê°€ ìë™ìœ¼ë¡œ UIì—ì„œ ì œê±°
}
```

---

## ğŸ”„ 4. ìƒíƒœ ê´€ë¦¬ íŒ¨í„´

### 4.1 ì „ì—­ ìƒíƒœ (Global State)

```typescript
// Firebase Contextë¥¼ í†µí•œ ì „ì—­ ìƒíƒœ
FirebaseProvider (layout.tsx)
    â”‚
    â”œâ”€ FirebaseContext
    â”‚   â”œâ”€ firebaseApp
    â”‚   â”œâ”€ firestore
    â”‚   â”œâ”€ auth
    â”‚   â””â”€ storage
    â”‚
    â””â”€ ëª¨ë“  í•˜ìœ„ ì»´í¬ë„ŒíŠ¸ì—ì„œ ì ‘ê·¼ ê°€ëŠ¥
        â”œâ”€ useFirestore()
        â”œâ”€ useAuth()
        â”œâ”€ useStorage()
        â””â”€ useUser()
```

### 4.2 ë¡œì»¬ ìƒíƒœ (Local State)

```typescript
// ê° ì»´í¬ë„ŒíŠ¸ì—ì„œ useState ì‚¬ìš©
const [isSubmitting, setIsSubmitting] = useState(false);
const [selectedMember, setSelectedMember] = useState<Member | null>(null);

// ë˜ëŠ” useCollectionìœ¼ë¡œ ìë™ ê´€ë¦¬
const { data, isLoading, error } = useCollection<Member>(query);
```

### 4.3 í¼ ìƒíƒœ (Form State)

```typescript
// React Hook Form ì‚¬ìš© (ì¼ë¶€ í˜ì´ì§€)
const { register, handleSubmit, formState: { errors } } = useForm();

// ë˜ëŠ” ì§ì ‘ ìƒíƒœ ê´€ë¦¬
const [formData, setFormData] = useState({
  name: '',
  email: '',
  // ...
});
```

---

## ğŸ¯ 5. ì£¼ìš” ë°ì´í„° íë¦„ ì‹œë‚˜ë¦¬ì˜¤

### 5.1 íšŒì› ë“±ë¡ í”Œë¡œìš°

```
1. ì‚¬ìš©ìê°€ /register/member ì ‘ì†
   â†“
2. í´ëŸ½ ëª©ë¡ ì¡°íšŒ (useCollection)
   query(collection(firestore, 'clubs'))
   â†“
3. í¼ ì‘ì„± ë° ì œì¶œ
   â†“
4. memberRequests ì»¬ë ‰ì…˜ì— ì €ì¥
   addDoc(collection(firestore, 'memberRequests'), data)
   â†“
5. í´ëŸ½ ì˜¤ë„ˆê°€ /club-dashboard/approvalsì—ì„œ í™•ì¸
   useCollection(query(memberRequests, where('clubId', '==', clubId)))
   â†“
6. ìŠ¹ì¸ ì‹œ:
   - members ì»¬ë ‰ì…˜ì— ì¶”ê°€
   - memberRequests ìƒíƒœ ì—…ë°ì´íŠ¸
   â†“
7. ì‹¤ì‹œê°„ ë¦¬ìŠ¤ë„ˆê°€ ìë™ìœ¼ë¡œ UI ì—…ë°ì´íŠ¸
```

### 5.2 ì´ìš©ê¶Œ ê°±ì‹  í”Œë¡œìš°

```
1. íšŒì›ì´ /my-profileì—ì„œ ì´ìš©ê¶Œ ê°±ì‹  ìš”ì²­
   â†“
2. pass_renewal_requests ìƒì„±
   addDoc(collection(firestore, 'pass_renewal_requests'), {
     memberId,
     passTemplateId,
     status: 'pending'
   })
   â†“
3. í´ëŸ½ ì˜¤ë„ˆê°€ /club-dashboard/approvalsì—ì„œ ìŠ¹ì¸
   â†“
4. ìŠ¹ì¸ ì‹œ:
   - member_passes ìƒì„± (status: 'pending')
   - payments ìƒì„±
   â†“
5. ê²°ì œ ìŠ¹ì¸ ì‹œ (/club-dashboard/payments):
   - member_passes.status = 'active'
   - member_passes.startDate = now
   - members.activePassId = passId
   â†“
6. ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸ë¡œ íšŒì› í™”ë©´ì— ë°˜ì˜
```

### 5.3 ì¶œì„ ì²´í¬ í”Œë¡œìš°

```
1. ì½”ì¹˜ê°€ /club-dashboard/class-status ì ‘ì†
   â†“
2. ìˆ˜ì—… ëª©ë¡ ì¡°íšŒ
   useCollection(query(classes, where('clubId', '==', clubId)))
   â†“
3. ìˆ˜ì—… ì„ íƒ â†’ íšŒì› ëª©ë¡ í‘œì‹œ
   useCollection(query(members, where('classId', '==', classId)))
   â†“
4. ì¶œì„ ìƒíƒœ ë³€ê²½
   - attendance ë¬¸ì„œ ìƒì„±/ì—…ë°ì´íŠ¸
   - member_passes.remainingSessions ê°ì†Œ
   - member_passes.attendanceCount ì¦ê°€
   â†“
5. ë°°ì¹˜ ì‘ì—…ìœ¼ë¡œ í•œ ë²ˆì— ì²˜ë¦¬
   writeBatch(firestore)
   â†“
6. ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸
```

---

## ğŸ”’ 6. ë³´ì•ˆ ë° ê¶Œí•œ íë¦„

### 6.1 Firestore Rules ê²€ì¦

```
Client Request
    â†“
Firestore Rules ê²€ì¦
    â”œâ”€ request.auth != null  (ì¸ì¦ í™•ì¸)
    â”œâ”€ request.auth.uid == resource.data.userId  (ì†Œìœ ê¶Œ í™•ì¸)
    â””â”€ get(/databases/.../users/$(request.auth.uid)).data.role == 'CLUB_OWNER'
    â†“
í—ˆìš©/ê±°ë¶€
```

### 6.2 í´ë¼ì´ì–¸íŠ¸ ê¶Œí•œ ì²´í¬

```typescript
// useUser Hookì—ì„œ role í™•ì¸
const { user } = useUser();

// ì¡°ê±´ë¶€ ë Œë”ë§
{user?.role === UserRole.CLUB_OWNER && (
  <AdminPanel />
)}

// ë˜ëŠ” í˜ì´ì§€ ë ˆë²¨ ë³´í˜¸
if (!user || user.role !== UserRole.CLUB_OWNER) {
  redirect('/dashboard');
}
```

---

## ğŸ“¡ 7. ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸ ë©”ì»¤ë‹ˆì¦˜

### 7.1 onSnapshot ë¦¬ìŠ¤ë„ˆ

```typescript
// Firestoreì˜ ì‹¤ì‹œê°„ ë¦¬ìŠ¤ë„ˆ
onSnapshot(query, (snapshot) => {
  snapshot.docChanges().forEach((change) => {
    if (change.type === 'added') {
      // ìƒˆ ë¬¸ì„œ ì¶”ê°€
    }
    if (change.type === 'modified') {
      // ë¬¸ì„œ ìˆ˜ì •
    }
    if (change.type === 'removed') {
      // ë¬¸ì„œ ì‚­ì œ
    }
  });
});
```

### 7.2 ìë™ UI ì—…ë°ì´íŠ¸

```
Firestore ë°ì´í„° ë³€ê²½
    â†“
onSnapshot ì½œë°± ì‹¤í–‰
    â†“
useState ì—…ë°ì´íŠ¸
    â†“
React ë¦¬ë Œë”ë§
    â†“
UI ìë™ ì—…ë°ì´íŠ¸
```

---

## ğŸ¨ 8. ì»´í¬ë„ŒíŠ¸ ë°ì´í„° íë¦„ ì˜ˆì‹œ

### 8.1 íšŒì› ëª©ë¡ í˜ì´ì§€

```typescript
// /app/members/page.tsx

export default function MembersPage() {
  // 1. Firebase ì„œë¹„ìŠ¤ ê°€ì ¸ì˜¤ê¸°
  const firestore = useFirestore();
  
  // 2. ì¿¼ë¦¬ ë©”ëª¨ì´ì œì´ì…˜
  const membersQuery = useMemoFirebase(() => 
    firestore ? collection(firestore, 'members') : null,
    [firestore]
  );
  
  // 3. ì‹¤ì‹œê°„ ë°ì´í„° êµ¬ë…
  const { data: members, isLoading } = useCollection<Member>(membersQuery);
  
  // 4. ë¡œë”© ìƒíƒœ ì²˜ë¦¬
  if (isLoading) return <LoadingSpinner />;
  
  // 5. ë°ì´í„° ë Œë”ë§
  return (
    <div>
      {members?.map(member => (
        <MemberCard key={member.id} member={member} />
      ))}
    </div>
  );
}
```

### 8.2 ë°ì´í„° íë¦„ ìˆœì„œ

```
1. ì»´í¬ë„ŒíŠ¸ ë§ˆìš´íŠ¸
   â†“
2. useFirestore() â†’ Firestore ì¸ìŠ¤í„´ìŠ¤ ê°€ì ¸ì˜¤ê¸°
   â†“
3. useMemoFirebase() â†’ ì¿¼ë¦¬ ë©”ëª¨ì´ì œì´ì…˜
   â†“
4. useCollection() â†’ ì‹¤ì‹œê°„ ë¦¬ìŠ¤ë„ˆ ì‹œì‘
   â†“
5. isLoading = true
   â†“
6. Firestoreì—ì„œ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
   â†“
7. onSnapshot ì½œë°± ì‹¤í–‰
   â†“
8. setData(results)
   â†“
9. isLoading = false
   â†“
10. ì»´í¬ë„ŒíŠ¸ ë¦¬ë Œë”ë§ (ë°ì´í„° í‘œì‹œ)
```

---

## ğŸ”„ 9. ì—ëŸ¬ ì²˜ë¦¬ íë¦„

### 9.1 Firestore ê¶Œí•œ ì—ëŸ¬

```typescript
useCollection()
  â†“
onSnapshot() ì—ëŸ¬ ë°œìƒ
  â†“
FirestorePermissionError ìƒì„±
  â†“
setError(contextualError)
  â†“
ì»´í¬ë„ŒíŠ¸ì—ì„œ error ìƒíƒœ í™•ì¸
  â†“
ì‚¬ìš©ìì—ê²Œ ì—ëŸ¬ ë©”ì‹œì§€ í‘œì‹œ
```

### 9.2 Toast ì•Œë¦¼

```typescript
try {
  await updateDoc(memberRef, data);
  toast({
    title: 'ì„±ê³µ',
    description: 'íšŒì› ì •ë³´ê°€ ì—…ë°ì´íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤.',
  });
} catch (error) {
  toast({
    variant: 'destructive',
    title: 'ì˜¤ë¥˜ ë°œìƒ',
    description: 'ì—…ë°ì´íŠ¸ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.',
  });
}
```

---

## ğŸ“ 10. ë°ì´í„° íë¦„ ìµœì í™”

### 10.1 ë©”ëª¨ì´ì œì´ì…˜

```typescript
// âœ… ì˜¬ë°”ë¥¸ ì‚¬ìš©
const query = useMemoFirebase(() => {
  if (!firestore) return null;
  return query(collection(firestore, 'members'));
}, [firestore]);

// âŒ ì˜ëª»ëœ ì‚¬ìš© (ë¬´í•œ ë£¨í”„ ë°œìƒ!)
const query = query(collection(firestore, 'members'));
```

### 10.2 ì¡°ê±´ë¶€ ì¿¼ë¦¬

```typescript
// clubIdê°€ ìˆì„ ë•Œë§Œ ì¿¼ë¦¬ ì‹¤í–‰
const membersQuery = useMemoFirebase(() => {
  if (!firestore || !user?.clubId) return null;
  return query(
    collection(firestore, 'members'),
    where('clubId', '==', user.clubId)
  );
}, [firestore, user?.clubId]);
```

### 10.3 í˜ì´ì§€ë„¤ì´ì…˜

```typescript
// limit()ìœ¼ë¡œ ë°ì´í„° ì–‘ ì œí•œ
const query = query(
  collection(firestore, 'members'),
  orderBy('createdAt', 'desc'),
  limit(50)  // í•œ ë²ˆì— 50ê°œë§Œ
);
```

---

## ğŸ¯ ìš”ì•½

### í•µì‹¬ ë°ì´í„° íë¦„

1. **ì¸ì¦**: Firebase Auth â†’ useUser() â†’ ì „ì—­ ìƒíƒœ
2. **ì¡°íšŒ**: useMemoFirebase() â†’ useCollection() â†’ ì‹¤ì‹œê°„ êµ¬ë…
3. **ìƒì„±/ìˆ˜ì •**: setDoc/updateDoc â†’ Firestore â†’ ìë™ UI ì—…ë°ì´íŠ¸
4. **ê¶Œí•œ**: Firestore Rules + í´ë¼ì´ì–¸íŠ¸ ì²´í¬
5. **ì—ëŸ¬**: try-catch + Toast ì•Œë¦¼

### ì£¼ìš” Hook

- `useUser()` - ì¸ì¦ëœ ì‚¬ìš©ì ì •ë³´
- `useFirestore()` - Firestore ì¸ìŠ¤í„´ìŠ¤
- `useCollection<T>()` - ì‹¤ì‹œê°„ ë°ì´í„° êµ¬ë…
- `useMemoFirebase()` - ì¿¼ë¦¬ ë©”ëª¨ì´ì œì´ì…˜
- `useToast()` - ì‚¬ìš©ì ì•Œë¦¼

---

**ì°¸ê³  ë¬¸ì„œ**:
- `docs/DATA_STRUCTURE.md` - ë°ì´í„° ìŠ¤í‚¤ë§ˆ
- `docs/PERFORMANCE.md` - ì„±ëŠ¥ ìµœì í™”
- `src/firebase/` - Firebase ê´€ë ¨ ì½”ë“œ
